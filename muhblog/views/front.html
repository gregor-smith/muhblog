{% extends "base.html" %}


{% macro page_url(page) %}
    {{- url_for('controllers.front', page=page) -}}
{% endmacro %}


{% block content %}

{% for entry in paginator.get_entries() %}
    <article class="front-entry">
        <header>
            <h1>
                {% set url = url_for(
                    'controllers.entry',
                    year='{:0>2}'.format(entry.date.year),
                    month='{:0>2}'.format(entry.date.month),
                    day='{:0>2}'.format(entry.date.day),
                    slug=entry.slug
                ) %}
                <a href="{{ url }}">
                    {{ entry.title }}
                </a>
            </h1>
            <time datetime="{{ entry.date | format_datetime_iso }}">
                {{ entry.date | format_datetime }}
            </time>
        </header>
        <section class="snub">
            {{ entry.render_snub() }}
        </section>
    </article>
{% endfor %}

<div class="flex" id="pagination">
    {% if paginator.has_previous_page() %}
        <a class="no-highlight first-page-button"
            href="{{ page_url(1) }}">
        </a>
        <a class="no-highlight previous-page-button"
           href="{{ page_url(paginator.current_page - 1) }}">
        </a>
    {% else %}
        <span class="no-highlight default-pointer first-page-button">
        </span>
        <span class="no-highlight default-pointer previous-page-button">
        </span>
    {% endif %}

    {% for page in paginator.page_number_group() %}
        {% if page == paginator.current_page %}
            <span class="page">
                {{ page }}
            </span>
        {% else %}
            <a class="page" href="{{ page_url(page) }}">
                {{ page }}
            </a>
        {% endif %}
    {% endfor %}

    {% if paginator.has_next_page() %}
        <a class="no-highlight next-page-button"
           href="{{ page_url(paginator.current_page + 1) }}">
        </a>
        <a class="no-highlight last-page-button"
           href="{{ page_url(paginator.get_total_pages()) }}">
        </a>
    {% else %}
        <span class="no-highlight default-pointer next-page-button">
        </span>
        <span class="no-highlight default-pointer last-page-button">
        </span>
    {% endif %}
</div>

{% endblock %}
